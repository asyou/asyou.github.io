<!DOCTYPE html>
<html>
<head>
<title>在uniapp网页H5、APP和微信小程序中处理latex并渲染成数学公式 - 王维的博客</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="uniapp,h5,latex,数学公式"/>
<meta name="description" content="在H5、APP和微信小程序中处理latex并渲染成数学公式" />
<link rel="shortcut icon" href="/favicon.ico" />
<link href="/bootstrap-5.3.0/css/bootstrap.min.css" rel="stylesheet">
<link href="/highlight/styles/a11y-dark.min.css" rel="stylesheet">
<script src="/bootstrap-5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="/common/jquery.min.js"></script>
<script src="/common/search.js"></script>
<script src="/highlight/highlight.min.js"></script>
<script >hljs.initHighlightingOnLoad();</script>
<style type="text/css">
    body {
        margin-top: 70px;
    }
    h1 {
        font-size: 18px;
    }
    h3 {
        font-size: 16px;
    }
    p {
        font-size: 14px;
    }
    img {
        max-width: 100%;
    }
    pre {
        padding: 10px;
    }
</style>
</head>
<body>
    <nav class="navbar navbar-expand-md bg-dark navbar-dark fixed-top">
	<div class="container">
		<a class="navbar-brand" href="/index.html"><img src="/common/logo.png" alt="Logo" width="24" height="24" class="d-inline-block align-text-top">王维的博客</a>
		<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav me-auto">
								<li class="nav-item"><a class="nav-link " href="/index.html">首页</a></li>
								<li class="nav-item"><a class="nav-link " href="/categories/php.html">PHP</a></li>
								<li class="nav-item"><a class="nav-link active" href="/categories/vue.html">Vue</a></li>
								<li class="nav-item"><a class="nav-link " href="/categories/unicloud.html">uniCloud</a></li>
								<li class="nav-item"><a class="nav-link " href="/categories/python.html">Python</a></li>
								<li class="nav-item"><a class="nav-link " href="/categories/notes.html">随手笔记</a></li>
							</ul>
            <div class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="搜索文章" aria-label="search" id="input">
                <button class="btn btn-outline-light text-nowrap" type="button" id="search">搜索</button>
            </div>
		</div>
	</div>
</nav>
    <div class="container content">
        <div class="mt-3">
            <h1>在uniapp网页H5、APP和微信小程序中处理latex并渲染成数学公式</h1>
            <span class="date"><small>2022-08-09</small></span>
            <div class="mt-4">
                <p>本文简单介绍在普通PC网页、uniapp网页H5、APP、微信小程序中处理latex并渲染成数学公式显示的方法。</p><p>在PC网页中处理latex转数学公式显示非常简单，只需要加载MathJax的一个JS文件，即可把页面中所有的latex格式全部自动转换成公式显示。<br/></p><p>测试题目</p><pre>将二次函数$y=2(x-4)^{2}-1$先上平移3个单位，再向左平移4个单位后的解析式是()
A.$y=2(x-1)^{2}+3$
B.$y=2x^{2}-4$
C.$y=2x^{2}+2$
D.$y=2(x-8)^{2}+2$</pre><p><strong>一、在PC网页中使用</strong></p><pre>&lt;script&nbsp;type=&quot;text/javascript&quot;&gt;
&nbsp;&nbsp;window.MathJax&nbsp;=&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;tex:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inlineMath:&nbsp;[[&#39;$&#39;,&#39;$&#39;],&nbsp;[&#39;\\(&#39;,&#39;\\)&#39;]],&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;行内显示
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displayMath:&nbsp;[[&#39;$$&#39;,&#39;$$&#39;],&nbsp;[&#39;\\[&#39;,&#39;\\]&#39;]],&nbsp;//&nbsp;块级显示
&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;svg:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontCache:&nbsp;&#39;global&#39;
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;};
&lt;/script&gt;
&lt;script&nbsp;type=&quot;text/javascript&quot;&nbsp;src=&quot;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js&quot;&gt;&lt;/script&gt;</pre><p>也可以写入一个js文件再调用</p><pre>//&nbsp;load-mathjax.js
window.MathJax&nbsp;=&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;tex:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inlineMath:&nbsp;[[&#39;$&#39;,&#39;$&#39;],&nbsp;[&#39;\\(&#39;,&#39;\\)&#39;]],&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;行内显示
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displayMath:&nbsp;[[&#39;$$&#39;,&#39;$$&#39;],&nbsp;[&#39;\\[&#39;,&#39;\\]&#39;]],&nbsp;//&nbsp;块级显示
&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;svg:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontCache:&nbsp;&#39;global&#39;
&nbsp;&nbsp;&nbsp;&nbsp;}
};
(function&nbsp;()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;script&nbsp;=&nbsp;document.createElement(&#39;script&#39;);
&nbsp;&nbsp;&nbsp;&nbsp;script.src&nbsp;=&nbsp;&#39;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js&#39;;
&nbsp;&nbsp;&nbsp;&nbsp;script.async&nbsp;=&nbsp;true;
&nbsp;&nbsp;&nbsp;&nbsp;document.head.appendChild(script);
})();</pre><pre>&lt;script&nbsp;type=&quot;text/javascript&quot;&nbsp;src=&quot;load-mathjax.js&quot;&nbsp;async&gt;&lt;/script&gt;</pre><p>如果加载慢也可以把tex-svg.js文件下载到本地并引用。</p><p>运行效果：</p><p><img src="/uploads/20220809/3f4b3ba9016b7226b72db36a7c9b1bc5.png"/></p><p><strong>二、在uniapp网页H5和APP中使用</strong></p><p>由于uniapp是一套代码统一各端（H5、小程序、APP等），这个时候就要考虑不同端对MathJax的支持了。<strong><br/></strong></p><p>H5其实跟PC网页中的处理方式差不多，引用MathJax即可，但在APP端却不可以这样用，因为APP端不支持普通的window对象DOM。不过好在uniapp提供了一个renderjs方式，经测试可以解决这个问题。</p><pre class="javascript">//&nbsp;test.vue
&lt;view&nbsp;class=&quot;example&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;将二次函数$y=2(x-4)^{2}-1$先上平移3个单位，再向左平移4个单位后的解析式是()&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;A.$y=2(x-1)^{2}+3$&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;B.$y=2x^{2}-4$&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;C.$y=2x^{2}+2$&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;D.$y=2(x-8)^{2}+2$&lt;/view&gt;
&lt;/view&gt;
&lt;script&nbsp;module=&quot;MathJax&quot;&nbsp;lang=&quot;renderjs&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;export&nbsp;default&nbsp;{
	mounted()&nbsp;{
	&nbsp;&nbsp;&nbsp;&nbsp;window.MathJax&nbsp;=&nbsp;{
		tex:&nbsp;{
		&nbsp;&nbsp;&nbsp;&nbsp;inlineMath:&nbsp;[
			[&#39;$&#39;,&nbsp;&#39;$&#39;],
			[&#39;\\(&#39;,&nbsp;&#39;\\)&#39;]
		&nbsp;&nbsp;&nbsp;&nbsp;],
		&nbsp;&nbsp;&nbsp;&nbsp;displayMath:&nbsp;[
			[&#39;$$&#39;,&nbsp;&#39;$$&#39;],
			[&#39;\\[&#39;,&nbsp;&#39;\\]&#39;]
		&nbsp;&nbsp;&nbsp;&nbsp;]
		},
		svg:&nbsp;{
		&nbsp;&nbsp;&nbsp;&nbsp;scale:&nbsp;1
		},
		startup:&nbsp;{
		&nbsp;&nbsp;&nbsp;&nbsp;ready:&nbsp;()&nbsp;=&gt;&nbsp;{
			window.MathJax.startup.defaultReady()
			window.MathJax.startup.promise.then(()&nbsp;=&gt;&nbsp;{
			&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;MathJax&nbsp;initial&nbsp;typesetting&nbsp;complete&#39;)
			})
		&nbsp;&nbsp;&nbsp;&nbsp;}
		}
	&nbsp;&nbsp;&nbsp;&nbsp;};
	&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;script&nbsp;=&nbsp;document.createElement(&#39;script&#39;)
	&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;下面链接后面换成text-chtml.js也行，但显示效果不如svg
	&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;script.src&nbsp;=&nbsp;&#39;https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js&#39;
	&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;下面是下载到本地的JS文件
	&nbsp;&nbsp;&nbsp;&nbsp;script.src&nbsp;=&nbsp;require(&#39;@/static/tex-svg.js&#39;)
	&nbsp;&nbsp;&nbsp;&nbsp;document.head.appendChild(script)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
	updated()&nbsp;{&nbsp;//&nbsp;此处解决下拉加载更多出来的公式渲染问题
	&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;MathJax&nbsp;=&nbsp;window.MathJax
	&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(MathJax)&nbsp;{
		MathJax.typesetPromise&nbsp;&amp;&amp;&nbsp;MathJax.typesetPromise()
	&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
&lt;/script&gt;</pre><p>运行效果：</p><p><img src="/uploads/20220809/1e6e1ac082426137347253c585afb870.png"/></p><p>可见renderjs方式完全能满足要求，实现效果跟PC网页完全一样。</p><p><strong>三、已发现的问题</strong></p><pre class="javascript">require(&#39;@/static/text-svg.js&#39;)</pre><p>1、这一行在H5中会报一个语法错误，查看网络连接是[object%20Object]，这明显不对，但运行效果却没有问题，原因猜测是非模块化JS引起；</p><p>2、替换成在线的JS后，不报上述错误了，但页面公式渲染耗时变长（tex-svg.js压缩版都有2.1M），有时候要很久才能渲染完成，这点不可接受。</p><p>为了解决这个问题，继续改进一番。</p><p>新建一个loadJs.js文件放在common目录，内容如下</p><pre class="javascript">function&nbsp;loadJs()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;Promise((resolve,&nbsp;reject)&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;script&nbsp;=&nbsp;document.createElement(&#39;script&#39;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.type&nbsp;=&nbsp;&quot;text/javascript&quot;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;#ifdef&nbsp;APP-PLUS
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.src&nbsp;=&nbsp;&#39;./static/tex-svg.js&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;#endif
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;#ifdef&nbsp;H5
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.src&nbsp;=&nbsp;&#39;../../static/tex-svg.js&#39;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;#endif
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;document.body.appendChild(script)

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.onload&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.onerror&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject()
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;})
}

export&nbsp;default&nbsp;loadJs</pre><p>原理就是通过标准的es5规范JS模块文件引用tex-svg.js，这样在页面上import该JS文件即可！</p><p>上面为什么用了条件编译是因为经过实测发现H5与APP运行后的static目录并不统一，也就是说编译后目录结构会有差异。</p><pre class="javascript">//&nbsp;test.vue
&lt;view&nbsp;class=&quot;example&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;将二次函数$y=2(x-4)^{2}-1$先上平移3个单位，再向左平移4个单位后的解析式是()&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;A.$y=2(x-1)^{2}+3$&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;B.$y=2x^{2}-4$&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;C.$y=2x^{2}+2$&lt;/view&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;view&gt;D.$y=2(x-8)^{2}+2$&lt;/view&gt;
&lt;/view&gt;
&lt;script&nbsp;module=&quot;MathJax&quot;&nbsp;lang=&quot;renderjs&quot;&gt;
&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;loadJs&nbsp;from&nbsp;&#39;@/common/loadJs.js&#39;
&nbsp;&nbsp;&nbsp;&nbsp;export&nbsp;default&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mounted()&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.MathJax&nbsp;=&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tex:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inlineMath:&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;$&#39;,&nbsp;&#39;$&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;\\(&#39;,&nbsp;&#39;\\)&#39;]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;displayMath:&nbsp;[
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;$$&#39;,&nbsp;&#39;$$&#39;],
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[&#39;\\[&#39;,&nbsp;&#39;\\]&#39;]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svg:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scale:&nbsp;1
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startup:&nbsp;{
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ready:&nbsp;()&nbsp;=&gt;&nbsp;{
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.MathJax.startup.defaultReady()
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.MathJax.startup.promise.then(()&nbsp;=&gt;&nbsp;{
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;MathJax&nbsp;initial&nbsp;typesetting&nbsp;complete&#39;)
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadJs().then((res)&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;success&#39;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}).catch((err)&nbsp;=&gt;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&#39;error&#39;)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
	updated()&nbsp;{&nbsp;//&nbsp;此处解决下拉加载更多出来的公式渲染问题
	&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;MathJax&nbsp;=&nbsp;window.MathJax
	&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(MathJax)&nbsp;{
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MathJax.typesetPromise&nbsp;&amp;&amp;&nbsp;MathJax.typesetPromise()
	&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
&lt;/script&gt;</pre><p>现在不报错了，H5端与APP端也都正常。</p><p><strong>四、其他</strong></p><p>遗憾的是uniapp的renderjs方式仅支持H5和APP，不支持小程序，需要在小程序上实现同样效果的话，还得想办法再折腾折腾。</p><p><strong>五、微信小程序中渲染方法（补充）</strong></p><p>微信小程序中处理latex，需要用到一个towxml插件，github地址：<a href="https://github.com/sbfkcel/towxml/wiki" target="_blank">点击前往</a></p><p>根据官方文档说明进行构建，把最终生成的towxml文件夹放入到static文件夹中。<br/></p><p>1、在main.js中引用<br/></p><pre>//&nbsp;main.js
//&nbsp;#ifdef&nbsp;MP-WEIXIN
Vue.prototype.towxml&nbsp;=&nbsp;require(&#39;./static/towxml/index.js&#39;)
//&nbsp;#endif</pre><p>2、在需要用到的页面中<br/></p><pre>//&nbsp;test.vue
&lt;template&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;towxml&nbsp;:nodes=&quot;towxml(&#39;将二次函数$y=2(x-4)^{2}-1$先上平移3个单位,再向左平移4个单位后的解析式是()&#39;,&#39;markdown&#39;)&quot;&gt;&lt;/towxml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;towxml&nbsp;:nodes=&quot;towxml(&#39;$y=2(x-1)^{2}+3$&#39;,&#39;markdown&#39;)&quot;&gt;&lt;/towxml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;towxml&nbsp;:nodes=&quot;towxml(&#39;$y=2x^{2}-4$&#39;,&#39;markdown&#39;)&quot;&gt;&lt;/towxml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;towxml&nbsp;:nodes=&quot;towxml(&#39;$y=2x^{2}+2$&#39;,&#39;markdown&#39;)&quot;&gt;&lt;/towxml&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&lt;towxml&nbsp;:nodes=&quot;towxml(&#39;$y=2(x-8)^{2}+2$&#39;,&#39;markdown&#39;)&quot;&gt;&lt;/towxml&gt;
&lt;/template&gt;

&lt;script&gt;
&nbsp;&nbsp;&nbsp;&nbsp;import&nbsp;towxml&nbsp;from&nbsp;&#39;@/static/towxml/towxml&#39;
&nbsp;&nbsp;&nbsp;&nbsp;export&nbsp;default&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;components:&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;towxml
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
&lt;/script&gt;</pre><p>渲染公式要用到towxml组件，第一个参数为包含latex的内容，第二个参数有markdown、html可选，渲染公式必须是markdown</p><p>3、运行效果</p><p><img src="/uploads/20220809/0e54a82f31b29b5ab859534eb942f2a1.png"/></p><p>可见在小程序中也完全达到了预期效果。</p><p>1、与MathJax的处理方式不同，towxml并非主动查找页面上的latex进行替换并渲染，而是要通过towxml组件输出内容；</p><p>2、不足之处，似乎只支持解析内联公式，块级公式无法解析（即以$$包裹的latex无法解析）。</p><p>但瑕不掩瑜，这都是小问题了，完美收工！</p>            </div>
        </div>
    </div>
    <footer class="footer mt-3 bg-dark">
    <div class="container pt-3 pb-3 text-light text-center">Copyright &copy;王维 2023</div>
</footer>
</body>
</html>